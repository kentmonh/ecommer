<div>
  <h2 class="lead">There are <%= cart.size %> products in the cart.</h2>
</div>

<% if flash[:remove_cart] %>
  <div class="alert alert-danger" role="alert">
    <%= flash[:remove_cart] %>
  </div>
<% end %>

<% if cart.present? %>
  <% i = 0 %>
  <% total = 0 %>
  <% cart.each do |product| %>
    <div class="card m-1" style="height: 20rem;">
      <div class="card-body">
        <div class="row">
            <div class="col-md-3">
              <% if product.image.present? %>
                <%= image_tag product.image, class: "card-img" %>
              <% end %>
            </div>
            <div class="col-md-7 offset-2">

              <p class="lead">
                <%= product.name %>
              </p>

              <p>
                Price: <%= product.sale_price %>
              </p>

              <p>
                <%= i %>
              </p>

              <p>
                <%= session[:quantity][i] %>
              </p>

              <%= number_field(:quantity, session[:quantity][i], in: 1..product.stock, step: 1) %>

              <div>
                <%= form_with url: cart_path(product), method: :delete do %>
                  <%= hidden_field_tag(:id, product.id) %>
                  <%= button_tag "Remove from Cart", class: "btn btn-outline-dark" %>
                <% end %>
              </div>

            </div>
        </div>
      </div>
    </div>
    <% i += 1 %>
    <% total += product.sale_price * i %>
  <% end %>

  <!-- total amount section -->
  <div class="card m-1">
    <div class="card-body">
      <div class="row">
        <div class="col-md-7 offset-5">
          <p class="lead">
            Total: <%= total %>
          </p>
        </div>
      </div>
    </div>
  </div>
<% end %>



<div>
  <h2 class="lead">There are <%= cart.size %> products in the cart.</h2>
</div>

<% if flash[:remove_cart] %>
  <div class="alert alert-danger" role="alert">
    <%= flash[:remove_cart] %>
  </div>
<% end %>

<% if cart.present? %>
  <% i = 0 %>
  <% total = 0 %>
  <% cart.each do |product| %>
    <div class="card m-1" style="height: 20rem;">
      <div class="card-body">
        <div class="row">
            <div class="col-md-3">
              <% if product.image.present? %>
                <%= image_tag product.image, class: "card-img" %>
              <% end %>
            </div>
            <div class="col-md-7 offset-2">

              <p class="lead">
                <%= product.name %>
              </p>

              <p>
                Price: <%= product.sale_price %>
              </p>

              <p>
                <%= i %>
              </p>

              <p>
                <%= session[:quantity][i] %>
              </p>

              <%= number_field(:quantity, session[:quantity][i], in: 1..product.stock, step: 1) %>

              <div>
                <%= form_with url: cart_path(product), method: :delete do %>
                  <%= hidden_field_tag(:id, product.id) %>
                  <%= button_tag "Remove from Cart", class: "btn btn-outline-dark" %>
                <% end %>
              </div>

            </div>
        </div>
      </div>
    </div>
    <% i += 1 %>
    <% total += product.sale_price * i %>
  <% end %>

  <!-- total amount section -->
  <div class="card m-1">
    <div class="card-body">
      <div class="row">
        <div class="col-md-7 offset-5">
          <p class="lead">
            Total: <%= total %>
          </p>
        </div>
      </div>
    </div>
  </div>
<% end %>



